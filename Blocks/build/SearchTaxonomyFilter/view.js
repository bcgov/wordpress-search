(()=>{"use strict";window.toggleTaxonomyFilter=function(o){const e=o.nextElementSibling,t=o.querySelector(".taxonomy-filter__toggle");e.classList.contains("collapsed")?(e.classList.remove("collapsed"),t.classList.remove("collapsed")):(e.classList.add("collapsed"),t.classList.add("collapsed"))},window.applyTaxonomyFilters=function(){sessionStorage.setItem("filterScrollPosition",window.scrollY);const o=new URL(window.location.href),e=o.searchParams,t=[];for(const o of e.keys())o.startsWith("taxonomy_")&&t.push(o);t.forEach((o=>e.delete(o))),document.querySelectorAll(".taxonomy-filter__checkbox:checked").forEach((o=>{const t=o.getAttribute("name"),n=o.value;if(t&&n){const o=t.endsWith("[]")?t.slice(0,-2):t;if(e.has(o)){const t=e.get(o);e.set(o,t+","+n)}else e.set(o,n)}})),window.location.href=o.toString()},window.removeTaxonomyFilter=function(o,e){sessionStorage.setItem("filterScrollPosition",window.scrollY);const t=new URL(window.location.href),n=t.searchParams,s="taxonomy_"+o;if(n.has(s)){const o=n.get(s).split(",").filter((o=>o!==e));0===o.length?n.delete(s):n.set(s,o.join(","))}window.location.href=t.toString()},function(){"scrollRestoration"in history&&(history.scrollRestoration="manual");const o=sessionStorage.getItem("filterScrollPosition");o&&requestAnimationFrame((()=>{window.scrollTo(0,parseInt(o)),sessionStorage.removeItem("filterScrollPosition")}))}(),document.addEventListener("DOMContentLoaded",(function(){!function(){const o=new URLSearchParams(window.location.search);document.querySelectorAll(".taxonomy-filter__checkbox").forEach((o=>{o.checked=!1})),o.forEach(((o,e)=>{if(e.startsWith("taxonomy_")){const t=e.replace("taxonomy_","");o.split(",").forEach((o=>{document.querySelectorAll(`input[name="taxonomy_${t}[]"][value="${o.trim()}"]`).forEach((o=>{o.checked=!0}))}))}}))}(),document.querySelectorAll(".taxonomy-filter__content").forEach((o=>{if(o.querySelectorAll(".taxonomy-filter__checkbox:checked").length>0){const e=o.previousElementSibling.querySelector(".taxonomy-filter__toggle");o.classList.remove("collapsed"),e.classList.remove("collapsed")}}))}))})();